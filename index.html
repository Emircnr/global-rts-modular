<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Oolido - Değerlendirme Platformu</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap');
    
    * {
      font-family: 'Poppins', sans-serif;
    }
    
    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
    }
    
    .card-hover {
      transition: all 0.3s ease;
    }
    
    .card-hover:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
    }
    
    .star-rating {
      cursor: pointer;
      transition: transform 0.2s;
    }
    
    .star-rating:hover {
      transform: scale(1.1);
    }

    .loader {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #667eea;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-purple-50 via-pink-50 to-red-50 min-h-screen">
  <div id="app"></div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider, signInAnonymously, signOut, onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js";
    import { getFirestore, collection, addDoc, getDocs, query, where, orderBy, updateDoc, doc, deleteDoc, getDoc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAh6JbnjsZtD-d0g3iSb2maSerPntUP6To",
      authDomain: "macbot-b7b45.firebaseapp.com",
      databaseURL: "https://macbot-b7b45-default-rtdb.firebaseio.com",
      projectId: "macbot-b7b45",
      storageBucket: "macbot-b7b45.firebasestorage.app",
      messagingSenderId: "88494187419",
      appId: "1:88494187419:web:9e0fd1a37e51332203373e",
      measurementId: "G-SVG851WK7Y"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    const googleProvider = new GoogleAuthProvider();

    // Global State
    let currentUser = null;
    let currentPage = 'home';
    let allContents = [];
    let searchTerm = '';
    let selectedCategory = 'Tümü';
    let selectedContent = null;
    let showAuthModal = false;
    let showAdminModal = false;
    let authMode = 'login';
    let mobileMenuOpen = false;
    let loading = true;

    const categories = [
      'Tümü', 'Ünlüler', 'Markalar', 'Şirketler', 'Hisse Senetleri', 
      'Fonlar', 'Spor Kulüpleri', 'Siyasiler', 'YouTube Kanalları', 
      'Filmler & Diziler', 'Ürünler'
    ];

    // 40+ İçerik Verisi
    const initialContents = [
      // Ünlüler
      { name: 'Cristiano Ronaldo', category: 'Ünlüler', description: 'Dünyanın en iyi futbolcularından biri, 5 kez Ballon d\'Or kazanan efsane sporcu.', image: 'https://images.unsplash.com/photo-1579952363873-27f3bade9f55?w=400', tags: ['futbol', 'spor', 'başarı'] },
      { name: 'Elon Musk', category: 'Ünlüler', description: 'Tesla ve SpaceX CEO\'su, teknoloji dünyasının vizyoner lideri.', image: 'https://images.unsplash.com/photo-1519389950473-47ba0277781c?w=400', tags: ['teknoloji', 'girişimci', 'yenilik'] },
      { name: 'Taylor Swift', category: 'Ünlüler', description: 'Grammy ödüllü şarkıcı ve söz yazarı, global müzik ikonu.', image: 'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400', tags: ['müzik', 'pop', 'ünlü'] },
      { name: 'Keanu Reeves', category: 'Ünlüler', description: 'Matrix ve John Wick serilerinin ünlü oyuncusu.', image: 'https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=400', tags: ['sinema', 'aksiyon', 'oyuncu'] },
      { name: 'Beyoncé', category: 'Ünlüler', description: 'Dünya çapında tanınan şarkıcı, söz yazarı ve yapımcı.', image: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400', tags: ['müzik', 'R&B', 'performans'] },

      // Markalar
      { name: 'Apple', category: 'Markalar', description: 'Dünya çapında tanınan teknoloji ve elektronik ürünleri markası.', image: 'https://images.unsplash.com/photo-1611532736579-6b16e2b50449?w=400', tags: ['teknoloji', 'elektronik', 'premium'] },
      { name: 'Nike', category: 'Markalar', description: 'Global spor giyim ve ayakkabı markası, Just Do It sloganıyla tanınır.', image: 'https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400', tags: ['spor', 'giyim', 'ayakkabı'] },
      { name: 'Coca-Cola', category: 'Markalar', description: 'Dünyanın en bilinen içecek markası, 130+ yıllık tarih.', image: 'https://images.unsplash.com/photo-1554866585-cd94860890b7?w=400', tags: ['içecek', 'global', 'klasik'] },
      { name: 'Samsung', category: 'Markalar', description: 'Güney Koreli teknoloji devi, akıllı telefon ve elektronik üreticisi.', image: 'https://images.unsplash.com/photo-1610945415295-d9bbf067e59c?w=400', tags: ['teknoloji', 'telefon', 'elektronik'] },
      { name: 'Mercedes-Benz', category: 'Markalar', description: 'Lüks otomobil markası, Alman mühendisliğinin simgesi.', image: 'https://images.unsplash.com/photo-1618843479313-40f8afb4b4d8?w=400', tags: ['otomobil', 'lüks', 'kalite'] },
      { name: 'Adidas', category: 'Markalar', description: 'Alman spor giyim ve ekipman üreticisi.', image: 'https://images.unsplash.com/photo-1556906781-9a412961c28c?w=400', tags: ['spor', 'giyim', 'ayakkabı'] },

      // Şirketler
      { name: 'Tesla', category: 'Şirketler', description: 'Elektrikli araç ve enerji depolama çözümleri sunan yenilikçi teknoloji şirketi.', image: 'https://images.unsplash.com/photo-1560958089-b8a1929cea89?w=400', tags: ['teknoloji', 'elektrikli araç', 'sürdürülebilirlik'] },
      { name: 'Amazon', category: 'Şirketler', description: 'E-ticaret devi, cloud computing ve dijital streaming lideri.', image: 'https://images.unsplash.com/photo-1523474253046-8cd2748b5fd2?w=400', tags: ['e-ticaret', 'teknoloji', 'lojistik'] },
      { name: 'Microsoft', category: 'Şirketler', description: 'Yazılım ve bulut teknolojileri devi, Windows ve Office üreticisi.', image: 'https://images.unsplash.com/photo-1633419461186-7d40a38105ec?w=400', tags: ['yazılım', 'teknoloji', 'cloud'] },
      { name: 'Google', category: 'Şirketler', description: 'Arama motoru ve teknoloji şirketi, internet devlerinden.', image: 'https://images.unsplash.com/photo-1573804633927-bfcbcd909acd?w=400', tags: ['teknoloji', 'arama', 'yapay zeka'] },
      { name: 'Meta', category: 'Şirketler', description: 'Facebook, Instagram ve WhatsApp\'ın sahibi sosyal medya devi.', image: 'https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=400', tags: ['sosyal medya', 'teknoloji', 'metaverse'] },
      { name: 'Netflix', category: 'Şirketler', description: 'Global streaming platformu, orijinal içerik üreticisi.', image: 'https://images.unsplash.com/photo-1574375927938-d5a98e8ffe85?w=400', tags: ['eğlence', 'streaming', 'dizi'] },

      // Hisse Senetleri
      { name: 'Apple (AAPL)', category: 'Hisse Senetleri', description: 'Apple Inc. hisse senedi, teknoloji sektörünün lideri.', image: 'https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=400', tags: ['borsa', 'teknoloji', 'yatırım'] },
      { name: 'NVIDIA (NVDA)', category: 'Hisse Senetleri', description: 'GPU üreticisi, yapay zeka ve gaming\'in favorisi.', image: 'https://images.unsplash.com/photo-1639762681485-074b7f938ba0?w=400', tags: ['teknoloji', 'AI', 'yatırım'] },
      { name: 'Microsoft (MSFT)', category: 'Hisse Senetleri', description: 'Microsoft Corporation hissesi, güvenilir teknoloji yatırımı.', image: 'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=400', tags: ['borsa', 'yazılım', 'yatırım'] },
      { name: 'Amazon (AMZN)', category: 'Hisse Senetleri', description: 'E-ticaret ve cloud computing lideri Amazon hissesi.', image: 'https://images.unsplash.com/photo-1519389950473-47ba0277781c?w=400', tags: ['e-ticaret', 'teknoloji', 'yatırım'] },
      { name: 'Tesla (TSLA)', category: 'Hisse Senetleri', description: 'Elektrikli araç devriminin öncüsü Tesla hissesi.', image: 'https://images.unsplash.com/photo-1611095790444-1dfa35e37b52?w=400', tags: ['otomotiv', 'elektrikli', 'yatırım'] },

      // Fonlar
      { name: 'Vanguard S&P 500 ETF', category: 'Fonlar', description: 'S&P 500 endeksini takip eden düşük maliyetli ETF.', image: 'https://images.unsplash.com/photo-1559526324-4b87b5e36e44?w=400', tags: ['yatırım', 'ETF', 'borsa'] },
      { name: 'ARK Innovation ETF', category: 'Fonlar', description: 'Yenilikçi teknoloji şirketlerine yatırım yapan aktif ETF.', image: 'https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=400', tags: ['teknoloji', 'yatırım', 'inovasyon'] },
      { name: 'iShares MSCI Emerging Markets', category: 'Fonlar', description: 'Gelişmekte olan piyasalara yatırım fonu.', image: 'https://images.unsplash.com/photo-1526304640581-d334cdbbf45e?w=400', tags: ['global', 'yatırım', 'fon'] },

      // Spor Kulüpleri
      { name: 'Galatasaray', category: 'Spor Kulüpleri', description: 'Türkiye\'nin en başarılı ve köklü spor kulüplerinden biri.', image: 'https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=400', tags: ['futbol', 'spor', 'türkiye'] },
      { name: 'Real Madrid', category: 'Spor Kulüpleri', description: 'İspanya\'nın ve Avrupa\'nın en başarılı futbol kulübü.', image: 'https://images.unsplash.com/photo-1522778034537-20a2486be8c9?w=400', tags: ['futbol', 'şampiyonlar ligi', 'ispanya'] },
      { name: 'Barcelona FC', category: 'Spor Kulüpleri', description: 'Katalan devi, tiki-taka futbolun merkezi.', image: 'https://images.unsplash.com/photo-1560272564-c83b66b1ad12?w=400', tags: ['futbol', 'la liga', 'tiki-taka'] },
      { name: 'Manchester United', category: 'Spor Kulüpleri', description: 'İngiltere\'nin en popüler futbol kulübü.', image: 'https://images.unsplash.com/photo-1508098682722-e99c43a406b2?w=400', tags: ['futbol', 'premier league', 'ingiltere'] },
      { name: 'Fenerbahçe', category: 'Spor Kulüpleri', description: 'Türkiye\'nin en çok taraftarı olan spor kulübü.', image: 'https://images.unsplash.com/photo-1579952363873-27f3bade9f55?w=400', tags: ['futbol', 'türkiye', 'sarı lacivert'] },
      { name: 'Beşiktaş', category: 'Spor Kulüpleri', description: 'Siyah beyazlı kartal, Türkiye\'nin köklü kulüplerinden.', image: 'https://images.unsplash.com/photo-1551958219-acbc608c6377?w=400', tags: ['futbol', 'türkiye', 'kartal'] },

      // Siyasiler
      { name: 'Barack Obama', category: 'Siyasiler', description: 'ABD\'nin 44. başkanı, ilk Afrikalı-Amerikalı başkan.', image: 'https://images.unsplash.com/photo-1560250097-0b93528c311a?w=400', tags: ['siyaset', 'ABD', 'demokrat'] },
      { name: 'Angela Merkel', category: 'Siyasiler', description: 'Almanya\'nın uzun süre başbakanlık yapan güçlü lideri.', image: 'https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=400', tags: ['siyaset', 'almanya', 'avrupa'] },
      { name: 'Emmanuel Macron', category: 'Siyasiler', description: 'Fransa Cumhurbaşkanı, genç ve reformist lider.', image: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400', tags: ['siyaset', 'fransa', 'avrupa'] },

      // YouTube Kanalları
      { name: 'MrBeast', category: 'YouTube Kanalları', description: 'Dünyanın en çok izlenen YouTuber\'larından, hayırseverlik videoları.', image: 'https://images.unsplash.com/photo-1611162616305-c69b3fa7fbe0?w=400', tags: ['youtube', 'eğlence', 'hayırseverlik'] },
      { name: 'PewDiePie', category: 'YouTube Kanalları', description: 'Gaming ve komedi içerikleriyle ünlü İsveçli YouTuber.', image: 'https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=400', tags: ['youtube', 'gaming', 'komedi'] },
      { name: 'Enis Kirazoğlu', category: 'YouTube Kanalları', description: 'Türkiye\'nin popüler YouTube fenomeni, eğlenceli içerikler.', image: 'https://images.unsplash.com/photo-1568602471122-7832951cc4c5?w=400', tags: ['youtube', 'türkiye', 'eğlence'] },
      { name: 'Veritasium', category: 'YouTube Kanalları', description: 'Bilim ve eğitim içerikleri üreten kaliteli kanal.', image: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400', tags: ['youtube', 'bilim', 'eğitim'] },
      { name: 'Dude Perfect', category: 'YouTube Kanalları', description: 'Spor hileleri ve eğlence içerikleri.', image: 'https://images.unsplash.com/photo-1566492031773-4f4e44671857?w=400', tags: ['youtube', 'spor', 'eğlence'] },

      // Filmler & Diziler
      { name: 'Breaking Bad', category: 'Filmler & Diziler', description: 'IMDb\'nin en yüksek puanlı dizisi, kimya öğretmeninin dönüşümü.', image: 'https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=400', tags: ['dizi', 'drama', 'suç'] },
      { name: 'Game of Thrones', category: 'Filmler & Diziler', description: 'Fantastik dram dizisi, taht kavgaları ve ejderhalar.', image: 'https://images.unsplash.com/photo-1598899134739-24c46f58b8c0?w=400', tags: ['dizi', 'fantastik', 'drama'] },
      { name: 'The Shawshank Redemption', category: 'Filmler & Diziler', description: 'IMDb\'nin 1 numaralı filmi, umut ve özgürlük hikayesi.', image: 'https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=400', tags: ['film', 'drama', 'klasik'] },
      { name: 'Inception', category: 'Filmler & Diziler', description: 'Christopher Nolan\'ın akıl oyunu filmi, rüyalar içinde rüyalar.', image: 'https://images.unsplash.com/photo-1478720568477-152d9b164e26?w=400', tags: ['film', 'bilim kurgu', 'aksiyon'] },
      { name: 'Stranger Things', category: 'Filmler & Diziler', description: 'Netflix\'in popüler bilim kurgu-korku dizisi.', image: 'https://images.unsplash.com/photo-1594908900066-3f47337549d8?w=400', tags: ['dizi', 'bilim kurgu', 'korku'] },

      // Ürünler
      { name: 'iPhone 15 Pro', category: 'Ürünler', description: 'Apple\'ın en gelişmiş akıllı telefonu, titanium tasarım.', image: 'https://images.unsplash.com/photo-1592286927505-b0501739c9ae?w=400', tags: ['teknoloji', 'telefon', 'apple'] },
      { name: 'PlayStation 5', category: 'Ürünler', description: 'Sony\'nin yeni nesil oyun konsolu, 4K gaming.', image: 'https://images.unsplash.com/photo-1606813907291-d86efa9b94db?w=400', tags: ['gaming', 'konsol', 'eğlence'] },
      { name: 'AirPods Pro', category: 'Ürünler', description: 'Apple\'ın gürültü önleyici kablosuz kulaklığı.', image: 'https://images.unsplash.com/photo-1606841837239-c5a1a4a07af7?w=400', tags: ['ses', 'kulaklık', 'apple'] },
      { name: 'MacBook Pro M3', category: 'Ürünler', description: 'Apple\'ın M3 çipli profesyonel dizüstü bilgisayarı.', image: 'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=400', tags: ['bilgisayar', 'apple', 'profesyonel'] },
      { name: 'Tesla Model 3', category: 'Ürünler', description: 'Tesla\'nın elektrikli sedan otomobili.', image: 'https://images.unsplash.com/photo-1560958089-b8a1929cea89?w=400', tags: ['otomobil', 'elektrikli', 'tesla'] }
    ];

    // Firebase Authentication
    onAuthStateChanged(auth, async (user) => {
      if (user) {
        const userDoc = await getDoc(doc(db, 'users', user.uid));
        currentUser = {
          uid: user.uid,
          email: user.email,
          displayName: user.displayName || 'Kullanıcı',
          isAdmin: userDoc.exists() ? userDoc.data().isAdmin : false
        };
      } else {
        currentUser = null;
      }
      loading = false;
      render();
    });

    // Google ile giriş
    async function loginWithGoogle() {
      try {
        const result = await signInWithPopup(auth, googleProvider);
        const user = result.user;
        
        await setDoc(doc(db, 'users', user.uid), {
          email: user.email,
          displayName: user.displayName,
          photoURL: user.photoURL,
          isAdmin: false,
          createdAt: new Date().toISOString()
        }, { merge: true });
        
        showAuthModal = false;
        render();
      } catch (error) {
        alert('Google girişi başarısız: ' + error.message);
      }
    }

    // Anonim giriş
    async function loginAnonymously() {
      try {
        await signInAnonymously(auth);
        showAuthModal = false;
        render();
      } catch (error) {
        alert('Anonim giriş başarısız: ' + error.message);
      }
    }

    // Admin girişi
    async function adminLogin(username, password) {
      if (username === 'admin' && password === '123') {
        try {
          // Admin için özel email ve şifre oluştur
          const adminEmail = 'admin@oolido.com';
          const adminPassword = 'admin123456';
          
          try {
            // Önce giriş dene
            await signInWithEmailAndPassword(auth, adminEmail, adminPassword);
          } catch (error) {
            // Yoksa oluştur
            const userCredential = await createUserWithEmailAndPassword(auth, adminEmail, adminPassword);
            await setDoc(doc(db, 'users', userCredential.user.uid), {
              email: adminEmail,
              displayName: 'Admin',
              isAdmin: true,
              createdAt: new Date().toISOString()
            });
          }
          
          showAuthModal = false;
          render();
        } catch (error) {
          alert('Admin girişi başarısız: ' + error.message);
        }
      } else {
        alert('Kullanıcı adı veya şifre hatalı!');
      }
    }

    // Çıkış
    async function logout() {
      try {
        await signOut(auth);
        currentPage = 'home';
        render();
      } catch (error) {
        alert('Çıkış başarısız: ' + error.message);
      }
    }

    // Firestore'dan içerikleri çek
    async function loadContents() {
      loading = true;
      render();
      
      try {
        const querySnapshot = await getDocs(collection(db, 'contents'));
        allContents = querySnapshot.docs.map(doc => ({
          id: doc.id,
          ...doc.data()
        }));
        
        // Eğer içerik yoksa, başlangıç içeriklerini ekle
        if (allContents.length === 0) {
          await initializeContents();
        }
      } catch (error) {
        console.error('İçerikler yüklenemedi:', error);
      }
      
      loading = false;
      render();
    }

    // Başlangıç içeriklerini ekle
    async function initializeContents() {
      try {
        for (const content of initialContents) {
          await addDoc(collection(db, 'contents'), {
            ...content,
            ratings: [],
            comments: [],
            views: Math.floor(Math.random() * 3000) + 500,
            lastActive: new Date().toISOString()
          });
        }
        await loadContents();
      } catch (error) {
        console.error('İçerikler eklenemedi:', error);
      }
    }

    // Yeni içerik ekle
    async function addContent(contentData) {
      try {
        await addDoc(collection(db, 'contents'), {
          ...contentData,
          ratings: [],
          comments: [],
          views: 0,
          lastActive: new Date().toISOString()
        });
        await loadContents();
        showAdminModal = false;
        render();
      } catch (error) {
        alert('İçerik eklenemedi: ' + error.message);
      }
    }

    // İçerik sil
    async function deleteContent(contentId) {
      if (confirm('Bu içeriği silmek istediğinizden emin misiniz?')) {
        try {
          await deleteDoc(doc(db, 'contents', contentId));
          await loadContents();
          render();
        } catch (error) {
          alert('İçerik silinemedi: ' + error.message);
        }
      }
    }

    // Yorum ve puan ekle
    async function addRatingAndComment(contentId, rating, comment) {
      if (!currentUser) {
        alert('Yorum yapmak için giriş yapmalısınız!');
        return;
      }

      try {
        const contentRef = doc(db, 'contents', contentId);
        const contentDoc = await getDoc(contentRef);
        const contentData = contentDoc.data();

        const newComment = {
          user: currentUser.displayName || currentUser.email,
          rating: rating,
          comment: comment,
          date: new Date().toISOString().split('T')[0]
        };

        await updateDoc(contentRef, {
          ratings: [...(contentData.ratings || []), rating],
          comments: [...(contentData.comments || []), newComment],
          views: (contentData.views || 0) + 1,
          lastActive: new Date().toISOString()
        });

        await loadContents();
        selectedContent = allContents.find(c => c.id === contentId);
        render();
      } catch (error) {
        alert('Yorum eklenemedi: ' + error.message);
      }
    }

    // Yardımcı fonksiyonlar
    function getAverageRating(ratings) {
      if (!ratings || ratings.length === 0) return 0;
      return (ratings.reduce((a, b) => a + b, 0) / ratings.length).toFixed(1);
    }

    function getTrendingContents() {
      return [...allContents]
        .sort((a, b) => {
          const scoreA = (a.views * 0.3) + ((a.comments?.length || 0) * 0.4) + ((a.ratings?.length || 0) * 0.3);
          const scoreB = (b.views * 0.3) + ((b.comments?.length || 0) * 0.4) + ((b.ratings?.length || 0) * 0.3);
          return scoreB - scoreA;
        })
        .slice(0, 10);
    }

    function getFilteredContents() {
      return allContents.filter(content => {
        const matchesSearch = content.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                             content.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
                             content.tags.some(tag => tag.toLowerCase().includes(searchTerm.toLowerCase()));
        const matchesCategory = selectedCategory === 'Tümü' || content.category === selectedCategory;
        return matchesSearch && matchesCategory;
      });
    }

    function getRelatedContents(content) {
      return allContents
        .filter(c => c.id !== content.id && 
                (c.category === content.category || 
                 c.tags.some(tag => content.tags.includes(tag))))
        .slice(0, 4);
    }

    // Render fonksiyonu
    function render() {
      const app = document.getElementById('app');
      
      if (loading) {
        app.innerHTML = `
          <div class="min-h-screen flex items-center justify-center">
            <div class="text-center">
              <div class="loader mx-auto mb-4"></div>
              <p class="text-gray-600 text-lg">Yükleniyor...</p>
            </div>
          </div>
        `;
        return;
      }

      app.innerHTML = `
        ${renderHeader()}
        ${currentPage === 'home' ? renderHomePage() : ''}
        ${currentPage === 'trending' ? renderTrendingPage() : ''}
        ${currentPage === 'detail' ? renderDetailPage() : ''}
        ${currentPage === 'profile' ? renderProfilePage() : ''}
        ${showAuthModal ? renderAuthModal() : ''}
        ${showAdminModal && currentUser?.isAdmin ? renderAdminModal() : ''}
      `;

      attachEventListeners();
    }

    function renderHeader() {
      return `
        <header class="gradient-bg text-white shadow-lg sticky top-0 z-40">
          <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
              <div class="flex items-center space-x-4">
                <button onclick="toggleMobileMenu()" class="md:hidden">
                  <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                  </svg>
                </button>
                <h1 class="text-3xl font-bold cursor-pointer hover:scale-105 transition" onclick="changePage('home')">
                  Oolido
                </h1>
              </div>

              <nav class="hidden md:flex space-x-6">
                <button onclick="changePage('home')" class="flex items-center space-x-2 hover:text-yellow-300 transition">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                  </svg>
                  <span>Ana Sayfa</span>
                </button>
                <button onclick="changePage('trending')" class="flex items-center space-x-2 hover:text-yellow-300 transition">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                  </svg>
                  <span>Gündem</span>
                </button>
                ${currentUser ? `
                  <button onclick="changePage('profile')" class="flex items-center space-x-2 hover:text-yellow-300 transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                    </svg>
                    <span>Profil</span>
                  </button>
                ` : ''}
              </nav>

              <div class="flex items-center space-x-3">
                ${currentUser?.isAdmin ? `
                  <button onclick="openAdminModal()" class="hidden md:flex items-center space-x-2 bg-yellow-500 text-gray-900 px-4 py-2 rounded-lg font-semibold hover:bg-yellow-400 transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                    <span>Admin</span>
                  </button>
                ` : ''}
                ${currentUser ? `
                  <button onclick="handleLogout()" class="flex items-center space-x-2 bg-white text-purple-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                    </svg>
                    <span class="hidden md:inline">${currentUser.displayName}</span>
                  </button>
                ` : `
                  <button onclick="openAuthModal()" class="flex items-center space-x-2 bg-white text-purple-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"/>
                    </svg>
                    <span>Giriş</span>
                  </button>
                `}
              </div>
            </div>

            ${mobileMenuOpen ? `
              <div class="md:hidden mt-4 space-y-2 pb-2">
                <button onclick="changePage('home')" class="block w-full text-left px-4 py-2 hover:bg-purple-800 rounded transition">
                  Ana Sayfa
                </button>
                <button onclick="changePage('trending')" class="block w-full text-left px-4 py-2 hover:bg-purple-800 rounded transition">
                  Gündem
                </button>
                ${currentUser ? `
                  <button onclick="changePage('profile')" class="block w-full text-left px-4 py-2 hover:bg-purple-800 rounded transition">
                    Profil
                  </button>
                ` : ''}
                ${currentUser?.isAdmin ? `
                  <button onclick="openAdminModal()" class="block w-full text-left px-4 py-2 bg-yellow-500 text-gray-900 rounded font-semibold">
                    Admin Paneli
                  </button>
                ` : ''}
              </div>
            ` : ''}
          </div>
        </header>
      `;
    }

    function renderHomePage() {
      const filteredContents = getFilteredContents();
      
      return `
        <div class="max-w-7xl mx-auto px-4 py-8">
          <div class="mb-8 space-y-4">
            <div class="relative">
              <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
              </svg>
              <input
                type="text"
                placeholder="İçerik, etiket veya kategori ara..."
                value="${searchTerm}"
                oninput="handleSearch(event)"
                class="w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-2xl focus:ring-2 focus:ring-purple-500 focus:border-transparent text-lg"
              />
            </div>

            <div class="flex items-center space-x-2 overflow-x-auto pb-2">
              <svg class="w-5 h-5 text-gray-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/>
              </svg>
              ${categories.map(cat => `
                <button
                  onclick="selectCategory('${cat}')"
                  class="px-4 py-2 rounded-full font-medium whitespace-nowrap transition ${
                    selectedCategory === cat
                      ? 'bg-gradient-to-r from-purple-600 to-pink-600 text-white'
                      : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                  }"
                >
                  ${cat}
                </button>
              `).join('')}
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            ${filteredContents.map(content => renderContentCard(content)).join('')}
          </div>

          ${filteredContents.length === 0 ? `
            <div class="text-center py-20">
              <p class="text-2xl text-gray-500">İçerik bulunamadı</p>
            </div>
          ` : ''}
        </div>
      `;
    }

    function renderContentCard(content) {
      const avgRating = getAverageRating(content.ratings);
      
      return `
        <div onclick="viewContent('${content.id}')" class="bg-white rounded-2xl shadow-lg card-hover cursor-pointer overflow-hidden group">
          <div class="relative h-48 overflow-hidden">
            <img
              src="${content.image}"
              alt="${content.name}"
              class="w-full h-full object-cover group-hover:scale-110 transition duration-300"
            />
            <div class="absolute top-3 right-3 bg-white px-3 py-1 rounded-full text-sm font-semibold text-purple-700">
              ${content.category}
            </div>
          </div>

          <div class="p-5">
            <h3 class="text-xl font-bold text-gray-800 mb-2">${content.name}</h3>
            <p class="text-gray-600 text-sm mb-4 line-clamp-2">${content.description}</p>

            <div class="flex items-center justify-between mb-3">
              <div class="flex items-center space-x-1">
                ${[1,2,3,4,5].map(i => `
                  <svg class="w-5 h-5 ${i <= Math.round(avgRating) ? 'text-yellow-400 fill-yellow-400' : 'text-gray-300'}" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                  </svg>
                `).join('')}
                <span class="ml-2 text-sm font-semibold text-gray-700">${avgRating}</span>
              </div>
              <span class="text-sm text-gray-500">${content.ratings?.length || 0} değerlendirme</span>
            </div>

            <div class="flex flex-wrap gap-2 mb-3">
              ${content.tags.slice(0, 3).map(tag => `
                <span class="bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-xs font-medium">
                  #${tag}
                </span>
              `).join('')}
            </div>

            <div class="flex items-center justify-between text-sm text-gray-500 pt-3 border-t">
              <span class="flex items-center space-x-1">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"/>
                </svg>
                <span>${content.comments?.length || 0} yorum</span>
              </span>
              <span class="flex items-center space-x-1">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                </svg>
                <span>${content.views || 0}</span>
              </span>
            </div>
          </div>
        </div>
      `;
    }

    function renderTrendingPage() {
      const trending = getTrendingContents();
      
      return `
        <div class="max-w-7xl mx-auto px-4 py-8">
          <div class="mb-8">
            <h2 class="text-3xl font-bold text-gray-800 mb-2 flex items-center space-x-3">
              <svg class="w-8 h-8 text-pink-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
              </svg>
              <span>Gündemdekiler</span>
            </h2>
            <p class="text-gray-600">En aktif ve popüler içerikler</p>
          </div>

          <div class="space-y-4">
            ${trending.map((content, index) => `
              <div
                onclick="viewContent('${content.id}')"
                class="bg-white rounded-2xl shadow-lg hover:shadow-2xl transition cursor-pointer p-6 flex items-center space-x-6"
              >
                <div class="text-4xl font-bold text-purple-600 w-16 text-center">
                  #${index + 1}
                </div>
                <img
                  src="${content.image}"
                  alt="${content.name}"
                  class="w-24 h-24 rounded-xl object-cover"
                />
                <div class="flex-1">
                  <h3 class="text-xl font-bold text-gray-800 mb-1">${content.name}</h3>
                  <p class="text-gray-600 text-sm mb-2">${content.category}</p>
                  <div class="flex items-center space-x-4 text-sm text-gray-500">
                    <span class="flex items-center space-x-1">
                      <svg class="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                      </svg>
                      <span>${getAverageRating(content.ratings)}</span>
                    </span>
                    <span>${content.views || 0} görüntülenme</span>
                    <span>${content.comments?.length || 0} yorum</span>
                  </div>
                </div>
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }

    function renderDetailPage() {
      if (!selectedContent) return '';
      
      const avgRating = getAverageRating(selectedContent.ratings);
      const relatedContents = getRelatedContents(selectedContent);
      
      return `
        <div class="max-w-7xl mx-auto px-4 py-8">
          <button
            onclick="changePage('home')"
            class="mb-6 text-purple-600 hover:text-purple-800 font-semibold flex items-center space-x-2"
          >
            <span>←</span>
            <span>Geri Dön</span>
          </button>

          <div class="bg-white rounded-2xl shadow-xl overflow-hidden mb-8">
            <img
              src="${selectedContent.image}"
              alt="${selectedContent.name}"
              class="w-full h-96 object-cover"
            />

            <div class="p-8">
              <div class="flex items-start justify-between mb-4">
                <div>
                  <h1 class="text-4xl font-bold text-gray-800 mb-2">${selectedContent.name}</h1>
                  <span class="bg-purple-100 text-purple-700 px-4 py-2 rounded-full text-sm font-semibold">
                    ${selectedContent.category}
                  </span>
                </div>
                <div class="text-right">
                  <div class="flex items-center space-x-2 mb-2">
                    ${[1,2,3,4,5].map(i => `
                      <svg class="w-6 h-6 ${i <= Math.round(avgRating) ? 'text-yellow-400 fill-yellow-400' : 'text-gray-300'}" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                      </svg>
                    `).join('')}
                  </div>
                  <p class="text-2xl font-bold text-gray-800">${avgRating}/5.0</p>
                  <p class="text-sm text-gray-600">${selectedContent.ratings?.length || 0} değerlendirme</p>
                </div>
              </div>

              <p class="text-gray-700 text-lg mb-6">${selectedContent.description}</p>

              <div class="flex flex-wrap gap-2 mb-6">
                ${selectedContent.tags.map(tag => `
                  <span class="bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700 px-4 py-2 rounded-full text-sm font-medium">
                    #${tag}
                  </span>
                `).join('')}
              </div>

              <div class="border-t pt-6">
                <h3 class="text-2xl font-bold text-gray-800 mb-4">Değerlendirme Yap</h3>
                
                <div class="bg-gray-50 p-6 rounded-xl mb-6">
                  <div class="mb-4">
                    <label class="block text-gray-700 font-semibold mb-2">Puanınız</label>
                    <div class="flex items-center space-x-2" id="rating-stars">
                      ${[1,2,3,4,5].map(rating => `
                        <button onclick="setRating(${rating})" class="star-rating transition hover:scale-110">
                          <svg class="w-8 h-8 rating-star" data-rating="${rating}" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                          </svg>
                        </button>
                      `).join('')}
                      <span class="ml-4 text-xl font-bold text-gray-800"><span id="current-rating">5</span>/5</span>
                    </div>
                  </div>

                  <div class="mb-4">
                    <label class="block text-gray-700 font-semibold mb-2">Yorumunuz</label>
                    <textarea
                      id="comment-input"
                      rows="4"
                      placeholder="Düşüncelerinizi paylaşın..."
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                    ></textarea>
                  </div>

                  <button
                    onclick="submitComment()"
                    class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition"
                  >
                    Yorumu Gönder
                  </button>
                </div>
              </div>

              <div class="border-t pt-6">
                <h3 class="text-2xl font-bold text-gray-800 mb-4">
                  Yorumlar (${selectedContent.comments?.length || 0})
                </h3>
                <div class="space-y-4">
                  ${(selectedContent.comments || []).map(comment => `
                    <div class="bg-gray-50 p-4 rounded-xl">
                      <div class="flex items-center justify-between mb-2">
                        <span class="font-semibold text-gray-800">${comment.user}</span>
                        <div class="flex items-center space-x-1">
                          ${[1,2,3,4,5].map(i => `
                            <svg class="w-4 h-4 ${i <= comment.rating ? 'text-yellow-400 fill-yellow-400' : 'text-gray-300'}" fill="currentColor" viewBox="0 0 20 20">
                              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                            </svg>
                          `).join('')}
                        </div>
                      </div>
                      <p class="text-gray-700 mb-1">${comment.comment}</p>
                      <p class="text-sm text-gray-500">${comment.date}</p>
                    </div>
                  `).join('')}
                </div>
              </div>
            </div>
          </div>

          ${relatedContents.length > 0 ? `
            <div>
              <h3 class="text-2xl font-bold text-gray-800 mb-6">Benzer İçerikler</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                ${relatedContents.map(content => renderContentCard(content)).join('')}
              </div>
            </div>
          ` : ''}
        </div>
      `;
    }

    function renderProfilePage() {
      if (!currentUser) return '';
      
      const userRatings = allContents.filter(c => 
        c.comments?.some(comment => comment.user === currentUser.displayName || comment.user === currentUser.email)
      );

      return `
        <div class="max-w-4xl mx-auto px-4 py-8">
          <div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
            <div class="flex items-center space-x-6 mb-6">
              <div class="w-24 h-24 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full flex items-center justify-center text-white text-4xl font-bold">
                ${currentUser.displayName[0].toUpperCase()}
              </div>
              <div>
                <h2 class="text-3xl font-bold text-gray-800">${currentUser.displayName}</h2>
                <p class="text-gray-600">${currentUser.isAdmin ? 'Yönetici' : 'Kullanıcı'}</p>
                <p class="text-sm text-gray-500">${currentUser.email || ''}</p>
              </div>
            </div>

            <div class="grid grid-cols-3 gap-4 mb-6">
              <div class="bg-purple-50 p-4 rounded-xl text-center">
                <p class="text-3xl font-bold text-purple-600">${userRatings.length}</p>
                <p class="text-gray-600">Değerlendirme</p>
              </div>
              <div class="bg-pink-50 p-4 rounded-xl text-center">
                <p class="text-3xl font-bold text-pink-600">
                  ${allContents.reduce((acc, c) => acc + (c.comments || []).filter(com => com.user === currentUser.displayName || com.user === currentUser.email).length, 0)}
                </p>
                <p class="text-gray-600">Yorum</p>
              </div>
              <div class="bg-red-50 p-4 rounded-xl text-center">
                <p class="text-3xl font-bold text-red-600">
                  ${currentUser.isAdmin ? allContents.length : '∞'}
                </p>
                <p class="text-gray-600">Aktivite</p>
              </div>
            </div>
          </div>

          <div class="bg-white rounded-2xl shadow-xl p-8">
            <h3 class="text-2xl font-bold text-gray-800 mb-6">Değerlendirmelerim</h3>
            <div class="space-y-4">
              ${userRatings.map(content => {
                const userComment = content.comments.find(c => c.user === currentUser.displayName || c.user === currentUser.email);
                return `
                  <div class="border-b pb-4">
                    <div class="flex items-center space-x-4 mb-2">
                      <img src="${content.image}" alt="${content.name}" class="w-16 h-16 rounded-lg object-cover" />
                      <div class="flex-1">
                        <h4 class="font-bold text-gray-800">${content.name}</h4>
                        <div class="flex items-center space-x-1">
                          ${[1,2,3,4,5].map(i => `
                            <svg class="w-4 h-4 ${i <= userComment.rating ? 'text-yellow-400 fill-yellow-400' : 'text-gray-300'}" fill="currentColor" viewBox="0 0 20 20">
                              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                            </svg>
                          `).join('')}
                        </div>
                      </div>
                    </div>
                    ${userComment ? `<p class="text-gray-700 ml-20">${userComment.comment}</p>` : ''}
                  </div>
                `;
              }).join('')}
            </div>
          </div>
        </div>
      `;
    }

    function renderAuthModal() {
      return `
        <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
          <div class="bg-white rounded-2xl max-w-md w-full p-8 shadow-2xl">
            <div class="flex justify-between items-center mb-6">
              <h2 class="text-2xl font-bold text-gray-800">
                ${authMode === 'login' ? 'Giriş Yap' : 'Admin Girişi'}
              </h2>
              <button onclick="closeAuthModal()" class="text-gray-500 hover:text-gray-700">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
              </button>
            </div>

            ${authMode === 'login' ? `
              <div class="space-y-4">
                <button
                  onclick="handleGoogleLogin()"
                  class="w-full flex items-center justify-center space-x-3 bg-white border-2 border-gray-300 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-50 transition"
                >
                  <svg class="w-6 h-6" viewBox="0 0 24 24">
                    <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                  </svg>
                  <span>Google ile Giriş Yap</span>
                </button>

                <button
                  onclick="handleAnonymousLogin()"
                  class="w-full bg-gray-200 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-300 transition"
                >
                  Anonim Giriş
                </button>

                <div class="relative my-4">
                  <div class="absolute inset-0 flex items-center">
                    <div class="w-full border-t border-gray-300"></div>
                  </div>
                  <div class="relative flex justify-center text-sm">
                    <span class="px-2 bg-white text-gray-500">veya</span>
                  </div>
                </div>

                <p class="text-center text-sm text-gray-600">
                  Admin misiniz?
                  <button
                    onclick="switchToAdmin()"
                    class="text-purple-600 font-semibold hover:underline ml-1"
                  >
                    Admin Girişi
                  </button>
                </p>
              </div>
            ` : `
              <div class="space-y-4">
                <input
                  type="text"
                  id="admin-username"
                  placeholder="Kullanıcı Adı"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                />
                <input
                  type="password"
                  id="admin-password"
                  placeholder="Şifre"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                />

                <button
                  onclick="handleAdminLogin()"
                  class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition"
                >
                  Admin Girişi Yap
                </button>

                <p class="text-center text-sm text-gray-600">
                  Kullanıcı olarak giriş yapmak için
                  <button
                    onclick="switchToUser()"
                    class="text-purple-600 font-semibold hover:underline ml-1"
                  >
                    buraya tıklayın
                  </button>
                </p>

                <div class="mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                  <p class="text-sm text-yellow-800">
                    <strong>Demo Admin:</strong><br>
                    Kullanıcı adı: admin<br>
                    Şifre: 123
                  </p>
                </div>
              </div>
            `}
          </div>
        </div>
      `;
    }

    function renderAdminModal() {
      return `
        <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto">
          <div class="bg-white rounded-2xl max-w-2xl w-full p-8 shadow-2xl my-8">
            <div class="flex justify-between items-center mb-6">
              <h2 class="text-2xl font-bold text-gray-800">Admin Paneli - Yeni İçerik Ekle</h2>
              <button onclick="closeAdminModal()" class="text-gray-500 hover:text-gray-700">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
              </button>
            </div>

            <div class="space-y-4">
              <input
                type="text"
                id="content-name"
                placeholder="İçerik Adı"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
              />

              <select
                id="content-category"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
              >
                ${categories.filter(c => c !== 'Tümü').map(cat => `
                  <option value="${cat}">${cat}</option>
                `).join('')}
              </select>

              <textarea
                id="content-description"
                placeholder="Açıklama"
                rows="4"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
              ></textarea>

              <input
                type="text"
                id="content-image"
                placeholder="Fotoğraf Linki (URL)"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
              />

              <input
                type="text"
                id="content-tags"
                placeholder="Etiketler (virgülle ayırın)"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
              />

              <button
                onclick="submitContent()"
                class="w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-3 rounded-lg font-semibold hover:from-green-700 hover:to-emerald-700 transition"
              >
                İçeriği Yayınla
              </button>
            </div>

            <div class="mt-8 border-t pt-6">
              <h3 class="text-xl font-bold mb-4 text-gray-800">Mevcut İçerikler</h3>
              <div class="space-y-2 max-h-64 overflow-y-auto">
                ${allContents.map(content => `
                  <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                    <div>
                      <p class="font-semibold text-gray-800">${content.name}</p>
                      <p class="text-sm text-gray-600">${content.category}</p>
                    </div>
                    <button
                      onclick="handleDeleteContent('${content.id}')"
                      class="text-red-600 hover:text-red-800"
                    >
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                      </svg>
                    </button>
                  </div>
                `).join('')}
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function attachEventListeners() {
      // Rating stars güncelleme
      updateRatingStars(5);
    }

    function updateRatingStars(rating) {
      const stars = document.querySelectorAll('.rating-star');
      stars.forEach(star => {
        const starRating = parseInt(star.getAttribute('data-rating'));
        if (starRating <= rating) {
          star.classList.add('text-yellow-400', 'fill-yellow-400');
          star.classList.remove('text-gray-300');
        } else {
          star.classList.add('text-gray-300');
          star.classList.remove('text-yellow-400', 'fill-yellow-400');
        }
      });
      
      const currentRatingEl = document.getElementById('current-rating');
      if (currentRatingEl) {
        currentRatingEl.textContent = rating;
      }
    }

    // Global functions
    window.changePage = (page) => {
      currentPage = page;
      mobileMenuOpen = false;
      render();
    };

    window.toggleMobileMenu = () => {
      mobileMenuOpen = !mobileMenuOpen;
      render();
    };

    window.openAuthModal = () => {
      showAuthModal = true;
      authMode = 'login';
      render();
    };

    window.closeAuthModal = () => {
      showAuthModal = false;
      render();
    };

    window.switchToAdmin = () => {
      authMode = 'admin';
      render();
    };

    window.switchToUser = () => {
      authMode = 'login';
      render();
    };

    window.openAdminModal = () => {
      showAdminModal = true;
      render();
    };

    window.closeAdminModal = () => {
      showAdminModal = false;
      render();
    };

    window.handleGoogleLogin = loginWithGoogle;
    window.handleAnonymousLogin = loginAnonymously;
    
    window.handleAdminLogin = () => {
      const username = document.getElementById('admin-username').value;
      const password = document.getElementById('admin-password').value;
      adminLogin(username, password);
    };

    window.handleLogout = logout;

    window.handleSearch = (e) => {
      searchTerm = e.target.value;
      render();
    };

    window.selectCategory = (category) => {
      selectedCategory = category;
      render();
    };

    window.viewContent = (contentId) => {
      selectedContent = allContents.find(c => c.id === contentId);
      currentPage = 'detail';
      render();
    };

    let selectedRating = 5;

    window.setRating = (rating) => {
      selectedRating = rating;
      updateRatingStars(rating);
    };

    window.submitComment = () => {
      const comment = document.getElementById('comment-input').value;
      if (!comment.trim()) {
        alert('Lütfen bir yorum yazın!');
        return;
      }
      addRatingAndComment(selectedContent.id, selectedRating, comment);
    };

    window.submitContent = () => {
      const name = document.getElementById('content-name').value;
      const category = document.getElementById('content-category').value;
      const description = document.getElementById('content-description').value;
      const image = document.getElementById('content-image').value;
      const tags = document.getElementById('content-tags').value;

      if (!name || !description || !tags) {
        alert('Lütfen tüm alanları doldurun!');
        return;
      }

      addContent({
        name,
        category,
        description,
        image: image || 'https://images.unsplash.com/photo-1579546929518-9e396f3cc809?w=400',
        tags: tags.split(',').map(t => t.trim())
      });
    };

    window.handleDeleteContent = (contentId) => {
      deleteContent(contentId);
    };

    // İlk yükleme
    loadContents();
  </script>
</body>
</html>
